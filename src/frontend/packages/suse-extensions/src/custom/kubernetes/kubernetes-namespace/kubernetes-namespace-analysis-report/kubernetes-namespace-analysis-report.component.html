<app-page-sub-nav>

  <div *ngIf="analyzerService.namespaceAnalyzers$ | async as analyzers">
    <mat-menu #appMenu="matMenu">
      <button (click)="runAnalysis(analyzer.id)" mat-menu-item *ngFor="let analyzer of analyzerService.namespaceAnalyzers$ | async">{{ analyzer.name }}</button>
    </mat-menu>
    
    <button mat-button [matMenuTriggerFor]="appMenu" *ngIf="analyzers.length > 0">
      <span>Run Analysis</span>
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
  </div>

  <app-analysis-report-selector
    prompt="Report"
    [allowNone]="false"
    (selected)="analysisChanged($event)"
    [autoSelect]="true"
    [endpoint]="endpointID"
    (reportCount)="onReportCount($event)"
    [path]="path">
  </app-analysis-report-selector>
</app-page-sub-nav>

<app-analysis-report-viewer [report]="report$ | async"></app-analysis-report-viewer>
<app-no-content-message *ngIf="noReportsAvailable" icon="assignment" [hidden]="false" firstLine="No reports available"></app-no-content-message>
