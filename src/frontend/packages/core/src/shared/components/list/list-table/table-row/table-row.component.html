<div class="table-row-wrapper"
  [ngClass]="{'table-row-wrapper__blocked': isBlocked$ | async, 'table-row-wrapper__info': inInfoState$ | async, 'table-row-wrapper__warning': inWarningState$ | async,'table-row-wrapper__errored': inErrorState$ | async}">
  <div *ngIf="isDeleting$ | async" class="table-row__deletion-bar-wrapper">
    <div class="table-row__deletion-bar-inner">
      <div class="table-row__deletion-bar-text">Deleting</div>
      <mat-progress-bar class="table-row__deletion-bar" mode="indeterminate"></mat-progress-bar>
    </div>
  </div>
  <div role="row" class="table-row"
    [ngClass]="{'in-expanded-row': !!inExpandedRow, 'has-expanded-row': expandComponent, 'has-error-row': errorMessage$ | async}">
    <div class="mat-row table-row__inner">
      <mat-expansion-panel class="table-row__inner__expansion" [togglePosition]="'before'" [disabled]="!expandComponent"
        (opened)="panelOpened()" (closed)="expandedService.collapse(rowId)" [expanded]="expandedService.expanded[rowId]"
        [hideToggle]="true" [ngClass]="{'table-row-wrapper__highlighted': isHighlighted$ | async}">
        <mat-expansion-panel-header class="table-row__inner__expansion--header"
          [ngClass]="{'in-expanded-row': !!inExpandedRow, 'has-expanded-row': expandComponent}"
          [collapsedHeight]="'auto'" [expandedHeight]="'auto'"
          [ngStyle]="{'min-height': minRowHeight || defaultMinRowHeight }">
          <ng-container cdkCellOutlet></ng-container>
        </mat-expansion-panel-header>
        <div #expandedComponent></div>
      </mat-expansion-panel>
    </div>
  </div>
  <div class="table-row__error mat-row" *ngIf="errorMessage$ | async">
    <div [ngClass]="{'table-row table-row__error-spacer__prominentErrorBar': prominentErrorBar}"
      class="table-row  table-row table-row__error-spacer"></div>
    <div class="table-row table-row__error-content">
      <mat-icon *ngIf="isWarningIcon$ | async" class="table-row__error-icon">warning</mat-icon>
      <mat-icon *ngIf="!(isWarningIcon$ | async)" class="table-row__error-icon">info</mat-icon>
      <div class="table-row__error-message" [innerHTML]="errorMessage$ | async"></div>
    </div>
  </div>
</div>